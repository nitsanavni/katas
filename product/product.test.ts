import { test, expect } from "bun:test";
import { inspect } from "util";

import product from "./product";

test("product", () => {
    [
        [[[]], []],
        [[[1]], [[1]]],
        [[[1, 2]], [[1], [2]]],
        [[[1], []], []],
        [[[], [1]], []],
        [[[1], [2]], [[1, 2]]],
        [
            [[1, 2], [3]],
            [
                [1, 3],
                [2, 3],
            ],
        ],
        [
            [
                [1, 2],
                [3, 4],
            ],
            [
                [1, 3],
                [1, 4],
                [2, 3],
                [2, 4],
            ],
        ],
        [[[1], [2], []], []],
        [[[1], [], [3]], []],
        [[[], [2], [3]], []],
        [[[], [], [3]], []],
        [[[], [], []], []],
        [[[1], [2], [3]], [[1, 2, 3]]],
        [
            [
                [1, 2],
                ["a", "b"],
                ["x", "y"],
            ],
            [
                [1, "a", "x"],
                [1, "a", "y"],
                [1, "b", "x"],
                [1, "b", "y"],
                [2, "a", "x"],
                [2, "a", "y"],
                [2, "b", "x"],
                [2, "b", "y"],
            ],
        ],
        [[[1], [2], [3]], [[1, 2, 3]]],
        [
            [
                [1, 2, 3],
                ["a", "b"],
            ],
            [
                [1, "a"],
                [1, "b"],
                [2, "a"],
                [2, "b"],
                [3, "a"],
                [3, "b"],
            ],
        ],
        [
            [
                [0, 1],
                [0, 1],
                [0, 1],
                [0, 1],
            ],
            [
                [0, 0, 0, 0],
                [0, 0, 0, 1],
                [0, 0, 1, 0],
                [0, 0, 1, 1],
                [0, 1, 0, 0],
                [0, 1, 0, 1],
                [0, 1, 1, 0],
                [0, 1, 1, 1],
                [1, 0, 0, 0],
                [1, 0, 0, 1],
                [1, 0, 1, 0],
                [1, 0, 1, 1],
                [1, 1, 0, 0],
                [1, 1, 0, 1],
                [1, 1, 1, 0],
                [1, 1, 1, 1],
            ],
        ],
    ].forEach(([input, output]) =>
        expect(inspect(product(...input))).toBe(inspect(output))
    );
});
