def spec:
    [
        [3,"fizz"],
        [5,"buzz"],
        [7,"whizz"],
        [9,"bang"]
    ];

def named_spec:
    spec | map({ divisor: .[0], code: .[1] });

def cat:
    add;

def filter(f):
    map(select(f));

def cat_codes(n):
    named_spec | filter(n % .divisor == 0) | map(.code) | cat;

def replace_null_with(n):
    if . == null then n else . end;

def fizzbuzz:
    . as $n |
    cat_codes($n) |
    replace_null_with($n);

map(fizzbuzz)